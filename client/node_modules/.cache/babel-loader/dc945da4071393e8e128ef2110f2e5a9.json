{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\guilh\\\\Desktop\\\\ai-emotions2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\guilh\\\\Desktop\\\\ai-emotions2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\guilh\\\\Desktop\\\\ai-emotions2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext}from'react';import{Content,LoginArea,ContainerLogin,Logo,LoginContainer}from'./style';import{Text,Button,Dflex,Input}from'../../stylesGlobaly/globalComponents';import logoSvg from\"./img/logo.svg\";import loadingSvg from'../../stylesGlobaly/loading.json';import Lottie from'react-lottie';import{loginContext}from'../../context/loginContext';import{validatePasswordAndLogin}from\"../../services/LoginService\";import ModalSubs from\"./Modal\";import{openSubsContext}from'../../context/modalSubsContext';var Login=function Login(){var _useContext=useContext(loginContext),_useContext2=_slicedToArray(_useContext,2),loginSession=_useContext2[0],setLoginSession=_useContext2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),disabledLoginButton=_useState2[0],setDisabledLoginButton=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),loginInput=_useState4[0],setLoginInput=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),passwordInput=_useState6[0],setPasswordInput=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),open=_useState8[0],setOpen=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),loading=_useState10[0],setLoading=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),retornoLoading=_useState12[0],setRetornoLoading=_useState12[1];function prepeareToLogin(){setDisabledLoginButton(true);setLoading(true);setRetornoLoading(\"\");setLoginSession({});}function LoginHandler(){return _LoginHandler.apply(this,arguments);}function _LoginHandler(){_LoginHandler=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var infoLogin;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:prepeareToLogin();_context.next=3;return validatePasswordAndLogin(loginInput,passwordInput);case 3:infoLogin=_context.sent;if(infoLogin.resp){localStorage.sessionIaEmotions=JSON.stringify(infoLogin.resp);setLoginSession(JSON.parse(localStorage.sessionIaEmotions));window.location.href=\"/home\";}else{setRetornoLoading(infoLogin.msg);}setDisabledLoginButton(false);setLoading(false);case 7:case\"end\":return _context.stop();}}},_callee);}));return _LoginHandler.apply(this,arguments);}useEffect(function(){setLoginInput('');setLoginInput('');},[]);return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Content,null,/*#__PURE__*/React.createElement(ContainerLogin,null,/*#__PURE__*/React.createElement(Dflex,{jc:\"center\"},/*#__PURE__*/React.createElement(Logo,{src:logoSvg}),/*#__PURE__*/React.createElement(Text,{size:\"28px\"},\"Spotifeel\")),/*#__PURE__*/React.createElement(Text,{wrap:\"wrap\",elip:\"inherit\",size:\"16px\",pb:\"12px\"},\"A IA que identifica sua musica pela sua emo\\xE7\\xE3o\"),/*#__PURE__*/React.createElement(LoginArea,null,/*#__PURE__*/React.createElement(Input,{mb:\"12px\",py:\"10px\",type:\"text\",placeholder:\"Login\",onChange:function onChange(e){return setLoginInput(e.target.value);},value:loginInput}),/*#__PURE__*/React.createElement(Input,{mb:\"12px\",py:\"10px\",type:\"password\",placeholder:\"Senha\",onChange:function onChange(e){return setPasswordInput(e.target.value);},value:passwordInput}),/*#__PURE__*/React.createElement(Dflex,null,/*#__PURE__*/React.createElement(Button,{w:\"40%\",size:\"18px\",mr:\"12px\",onClick:LoginHandler,disabled:disabledLoginButton},\"Login\"),/*#__PURE__*/React.createElement(Button,{w:\"60%\",onClick:function onClick(){return setOpen(true);}},\"Click Aqui para se inscrever\"))),loading?/*#__PURE__*/React.createElement(Lottie,{options:{loop:true,autoplay:true,animationData:loadingSvg,rendererSettings:{preserveAspectRatio:\"xMidYMid slice\"}},height:40,width:40}):/*#__PURE__*/React.createElement(Text,{size:\"16px\",pb:\"12px\"},retornoLoading))),loginSession.username&&/*#__PURE__*/React.createElement(LoginContainer,null,/*#__PURE__*/React.createElement(Text,{wrap:\"wrap\",elip:\"inherit\",size:\"16px\",px:\"4px\",color:\"#aaaaaa\"},\"Voc\\xEA est\\xE1 logado como:  \"),/*#__PURE__*/React.createElement(Text,{wrap:\"wrap\",elip:\"inherit\",size:\"16px\"},loginSession.username)),/*#__PURE__*/React.createElement(openSubsContext.Provider,{value:[open,setOpen]},/*#__PURE__*/React.createElement(ModalSubs,null)));};export default Login;","map":{"version":3,"sources":["C:/Users/guilh/Desktop/ai-emotions2.0/client/src/components/Login/index.js"],"names":["React","useState","useEffect","useContext","Content","LoginArea","ContainerLogin","Logo","LoginContainer","Text","Button","Dflex","Input","loadingSvg","Lottie","loginContext","validatePasswordAndLogin","ModalSubs","openSubsContext","Login","loginSession","setLoginSession","disabledLoginButton","setDisabledLoginButton","loginInput","setLoginInput","passwordInput","setPasswordInput","open","setOpen","loading","setLoading","retornoLoading","setRetornoLoading","prepeareToLogin","LoginHandler","infoLogin","resp","localStorage","sessionIaEmotions","JSON","stringify","parse","window","location","href","msg","logoSvg","e","target","value","loop","autoplay","animationData","rendererSettings","preserveAspectRatio","username"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\nimport { Content, LoginArea, ContainerLogin, Logo, LoginContainer } from './style'\nimport { Text, Button, Dflex, Input } from '../../stylesGlobaly/globalComponents'\nimport logoSvg from './img/logo.svg';\nimport loadingSvg from '../../stylesGlobaly/loading.json';\nimport Lottie from 'react-lottie';\nimport { loginContext } from '../../context/loginContext'\nimport { validatePasswordAndLogin } from \"../../services/LoginService\"\nimport ModalSubs from \"./Modal\"\nimport { openSubsContext } from '../../context/modalSubsContext';\n\nconst Login = ()=>{\n    const [loginSession, setLoginSession] = useContext(loginContext)\n    const [disabledLoginButton, setDisabledLoginButton] = useState(false)\n    const [loginInput, setLoginInput] = useState(\"\") \n    const [passwordInput, setPasswordInput] = useState(\"\")\n    const [open, setOpen] = useState(false) \n    const [loading, setLoading] = useState(false) \n    const [retornoLoading, setRetornoLoading] = useState(\"\")\n    \n    function prepeareToLogin(){\n        setDisabledLoginButton(true)\n        setLoading(true)\n        setRetornoLoading(\"\")\n        setLoginSession({})\n    }\n\n    async function LoginHandler(){\n        prepeareToLogin()\n        const infoLogin = await validatePasswordAndLogin(loginInput, passwordInput)\n        if(infoLogin.resp){\n            localStorage.sessionIaEmotions = JSON.stringify(infoLogin.resp)\n            setLoginSession(JSON.parse(localStorage.sessionIaEmotions))\n            window.location.href = \"/home\"\n        } else {\n            setRetornoLoading(infoLogin.msg)\n        }\n        setDisabledLoginButton(false)\n        setLoading(false)\n    }\n\n    useEffect(()=>{\n        setLoginInput('')\n        setLoginInput('')\n    }, [])\n\n    return (\n        <div>\n            <Content>\n                <ContainerLogin>\n                    <Dflex jc=\"center\">\n                        <Logo src={logoSvg} />\n                        <Text size=\"28px\">Spotifeel</Text>\n                    </Dflex>\n                    <Text wrap=\"wrap\" elip=\"inherit\" size=\"16px\" pb=\"12px\">A IA que identifica sua musica pela sua emoção</Text>\n                    <LoginArea>\n                        <Input mb=\"12px\" py=\"10px\" type=\"text\" placeholder=\"Login\" onChange={e => setLoginInput(e.target.value)} value={loginInput}/>\n                        <Input mb=\"12px\" py=\"10px\" type=\"password\" placeholder=\"Senha\" onChange={e => setPasswordInput(e.target.value)} value={passwordInput}/>\n                        <Dflex>\n                            <Button w=\"40%\" size=\"18px\" mr=\"12px\" onClick={LoginHandler} disabled={disabledLoginButton}>Login</Button>\n                            <Button w=\"60%\" onClick={()=>setOpen(true)}>Click Aqui para se inscrever</Button>\n                        </Dflex>\n                    </LoginArea>\n                    { \n                        loading? <Lottie \n                            options={{\n                                loop: true,\n                                autoplay: true,\n                                animationData: loadingSvg,\n                                rendererSettings: {\n                                    preserveAspectRatio: \"xMidYMid slice\"\n                                }\n                            }}\n                            height={40}\n                            width={40}\n                        /> : <Text size=\"16px\" pb=\"12px\">{retornoLoading}</Text>\n                    }\n                </ContainerLogin>\n                \n            </Content>\n            { loginSession.username &&\n                <LoginContainer>\n                    <Text wrap=\"wrap\" elip=\"inherit\" size=\"16px\" px=\"4px\" color=\"#aaaaaa\">Você está logado como:  </Text>\n                    <Text wrap=\"wrap\" elip=\"inherit\" size=\"16px\">{loginSession.username}</Text>\n                </LoginContainer>\n            }\n            \n            <openSubsContext.Provider value={[open, setOpen]}>\n                <ModalSubs/>\n            </openSubsContext.Provider>\n        </div>\n    );\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}