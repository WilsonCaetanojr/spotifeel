{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\guilh\\\\Desktop\\\\ai-emotions2.0\\\\client\\\\src\\\\components\\\\Home\\\\index.js\";\nimport React, { useState, useEffect, useContext, useRef, useMemo } from 'react';\nimport { loginContext } from '../../context/loginContext';\nimport { playlistsContext, SelectedPlaylistContext } from '../../context/playlistContext';\nimport { filePlayingContext } from '../../context/filePlaying';\nimport { Content, BottomNav, ControllerMusics, PlayerVideoStyle } from './style';\nimport { Text, Button, Dflex, Input } from '../../stylesGlobaly/globalComponents';\nimport Playlist from './playlist';\nimport Player from './player';\nimport Emotions from './emotions';\nimport useDeviceDetect from '../../hooks/detectDevice';\nimport usePlayer from '../../hooks/usePlayer';\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport RestoreIcon from '@material-ui/icons/Restore';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useMusic from '../../hooks/useMusic';\nconst useStyles = makeStyles({\n  root: {\n    color: \"#FFFFFF\",\n    '&$selected': {\n      color: \"#1db954\"\n    }\n  },\n  selected: {}\n});\n\nconst Home = () => {\n  var _videoFile$value2;\n\n  const style = useStyles();\n  const [loginSession, setLoginSession] = useContext(loginContext);\n  const [playlists, setPlaylists] = useState([]);\n  const [videoFile, setVideoFile] = useState({});\n  const {\n    PlayPause\n  } = usePlayer([videoFile, setVideoFile], [playlists, setPlaylists]);\n  const {\n    isMobile\n  } = useDeviceDetect();\n  const [valueIndexed, setValueIndexed] = useState(0);\n  const tabs = [useRef(null), useRef(null), useRef(null)];\n  const playerRef = useRef(null);\n  const [selectedPlaylist, setSelectedPlaylist] = useState({});\n  const {\n    handlerSetPlaylistRandom\n  } = useMusic([videoFile, setVideoFile], [playlists, setPlaylists], [selectedPlaylist, setSelectedPlaylist]);\n  useEffect(() => {\n    if (!loginSession.login && !loginSession._id && !loginSession.username) {\n      window.location.href = \"/\";\n    }\n  }, [loginSession]);\n\n  const handleProgress = state => {\n    console.log(videoFile.seeking);\n\n    if (!videoFile.seeking) {\n      const newVideoFile = { ...videoFile\n      };\n      newVideoFile.played = state.played;\n      setVideoFile(newVideoFile);\n    }\n  };\n\n  const MusicPlaying = React.memo(() => {\n    var _videoFile$value;\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ControllerMusics, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(PlayerVideoStyle, {\n      playing: videoFile.playing,\n      url: (_videoFile$value = videoFile.value) === null || _videoFile$value === void 0 ? void 0 : _videoFile$value.file,\n      ref: playerRef,\n      onPause: () => {\n        PlayPause(false);\n      },\n      onPlay: () => {\n        PlayPause(true);\n      },\n      onEnded: handlerSetPlaylistRandom,\n      onProgress: handleProgress,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(Emotions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    })));\n  });\n  return /*#__PURE__*/React.createElement(Content, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(playlistsContext.Provider, {\n    value: [playlists, setPlaylists],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SelectedPlaylistContext.Provider, {\n    value: [selectedPlaylist, setSelectedPlaylist],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(filePlayingContext.Provider, {\n    value: [videoFile, setVideoFile],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Text, {\n    py: \"26px\",\n    size: \"20px\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 25\n    }\n  }, \"Bem Vindo \", loginSession.username), !isMobile ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Playlist, {\n    user: loginSession,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 33\n    }\n  }), MusicPlaying, /*#__PURE__*/React.createElement(Player, {\n    player: playerRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    ref: tabs[0],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Playlist, {\n    user: loginSession,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    ref: tabs[1],\n    style: {\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(PlayerVideoStyle, {\n    playing: videoFile.playing,\n    url: (_videoFile$value2 = videoFile.value) === null || _videoFile$value2 === void 0 ? void 0 : _videoFile$value2.file,\n    pip: true,\n    onPause: () => {\n      PlayPause(false);\n    },\n    onPlay: () => {\n      PlayPause(true);\n    },\n    onEnded: handlerSetPlaylistRandom,\n    onSeek: e => console.log('onSeek', e),\n    onProgress: handleProgress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    ref: tabs[2],\n    style: {\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Emotions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Player, {\n    player: playerRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(BottomNav, {\n    value: valueIndexed,\n    onChange: (event, newValue) => {\n      tabs.map(element => element.current.style.display = \"none\");\n      tabs[newValue].current.style.display = \"block\";\n      setValueIndexed(newValue);\n    },\n    showLabels: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(BottomNavigationAction, {\n    label: \"Recents\",\n    classes: style,\n    icon: /*#__PURE__*/React.createElement(RestoreIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 99\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(BottomNavigationAction, {\n    label: \"Favorites\",\n    classes: style,\n    icon: /*#__PURE__*/React.createElement(FavoriteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 101\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(BottomNavigationAction, {\n    label: \"Nearby\",\n    classes: style,\n    icon: /*#__PURE__*/React.createElement(LocationOnIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 98\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 37\n    }\n  })))))));\n};\n\nexport default Home;","map":{"version":3,"sources":["C:/Users/guilh/Desktop/ai-emotions2.0/client/src/components/Home/index.js"],"names":["React","useState","useEffect","useContext","useRef","useMemo","loginContext","playlistsContext","SelectedPlaylistContext","filePlayingContext","Content","BottomNav","ControllerMusics","PlayerVideoStyle","Text","Button","Dflex","Input","Playlist","Player","Emotions","useDeviceDetect","usePlayer","BottomNavigationAction","RestoreIcon","FavoriteIcon","LocationOnIcon","makeStyles","useMusic","useStyles","root","color","selected","Home","style","loginSession","setLoginSession","playlists","setPlaylists","videoFile","setVideoFile","PlayPause","isMobile","valueIndexed","setValueIndexed","tabs","playerRef","selectedPlaylist","setSelectedPlaylist","handlerSetPlaylistRandom","login","_id","username","window","location","href","handleProgress","state","console","log","seeking","newVideoFile","played","MusicPlaying","memo","playing","value","file","display","e","event","newValue","map","element","current"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, useRef, useMemo } from 'react';\nimport { loginContext } from '../../context/loginContext'\nimport { playlistsContext, SelectedPlaylistContext } from '../../context/playlistContext'\nimport { filePlayingContext } from '../../context/filePlaying'\nimport { Content, BottomNav, ControllerMusics, PlayerVideoStyle } from './style'\nimport { Text, Button, Dflex, Input } from '../../stylesGlobaly/globalComponents'\nimport Playlist from './playlist'\nimport Player from './player'\nimport Emotions from './emotions'\nimport useDeviceDetect from '../../hooks/detectDevice'\nimport usePlayer from '../../hooks/usePlayer'\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport RestoreIcon from '@material-ui/icons/Restore';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport LocationOnIcon from '@material-ui/icons/LocationOn';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useMusic from '../../hooks/useMusic'\n\nconst useStyles = makeStyles({\n    root: {\n        color: \"#FFFFFF\",\n        '&$selected': {\n            color: \"#1db954\",\n        },\n    },\n    selected: {},\n});\n\nconst Home = ()=>{\n    const style = useStyles()\n    const [loginSession, setLoginSession] = useContext(loginContext)\n    const [playlists, setPlaylists] = useState([])\n    const [videoFile, setVideoFile] = useState({});\n    const { PlayPause } = usePlayer([videoFile, setVideoFile], [playlists, setPlaylists]);\n    const { isMobile } = useDeviceDetect();\n    const [valueIndexed, setValueIndexed] = useState(0);\n    const tabs = [useRef(null), useRef(null), useRef(null)]\n    const playerRef = useRef(null)\n    const [selectedPlaylist, setSelectedPlaylist] = useState({});\n    const { handlerSetPlaylistRandom } = useMusic(\n        [videoFile, setVideoFile],\n        [playlists, setPlaylists],\n        [selectedPlaylist, setSelectedPlaylist]\n    )\n\n    useEffect(()=>{\n        if(!loginSession.login && !loginSession._id && !loginSession.username){\n            window.location.href = \"/\"\n        }\n    }, [loginSession])\n\n    const handleProgress = (state) => {\n        console.log(videoFile.seeking)\n        if (!videoFile.seeking) {\n            const newVideoFile = {...videoFile} \n            newVideoFile.played = state.played\n            setVideoFile(newVideoFile)\n        }\n    }\n\n    const MusicPlaying = React.memo(() => {\n        return (\n            <div>\n                <ControllerMusics>\n                    <PlayerVideoStyle \n                        playing={videoFile.playing} \n                        url={videoFile.value?.file} \n                        ref={playerRef}\n                        onPause={()=> { \n                            PlayPause(false)\n                        }}\n                        onPlay={()=> { \n                            PlayPause(true)\n                        }}\n                        onEnded={handlerSetPlaylistRandom}\n                        onProgress={handleProgress}\n                    />\n                    <Emotions/>\n                </ControllerMusics>\n            </div>\n        )\n    })\n\n    return (\n        <Content>\n            <playlistsContext.Provider value={[playlists, setPlaylists]}>\n                <SelectedPlaylistContext.Provider value={[selectedPlaylist, setSelectedPlaylist]}>\n                    <filePlayingContext.Provider value={[videoFile, setVideoFile]}>\n                        <Text py=\"26px\" size=\"20px\">Bem Vindo {loginSession.username}</Text>\n                        {!isMobile ? \n                            <div>\n                                <Playlist user={loginSession}/>     \n                                {MusicPlaying}\n                            <Player player={playerRef}/>\n                            </div>\n                            : \n                            <div>\n                                <div ref={tabs[0]}>\n                                    <Playlist user={loginSession} />  \n                                </div>     \n                                <div ref={tabs[1]} style={{display: \"none\"}}>\n                                    <PlayerVideoStyle \n                                        playing={videoFile.playing} \n                                        url={videoFile.value?.file} \n                                        pip={true} \n                                        onPause={()=> { \n                                            PlayPause(false)\n                                        }}\n                                        onPlay={()=> { \n                                            PlayPause(true)\n                                        }}\n                                        onEnded={handlerSetPlaylistRandom}\n                                        onSeek={e => console.log('onSeek', e)}\n                                        onProgress={handleProgress}\n                                    />\n                                </div>\n                                <div ref={tabs[2]} style={{display: \"none\"}}>\n                                    <Emotions />\n                                </div>\n                                <Player player={playerRef}/>\n\n                                <BottomNav\n                                    value={valueIndexed}\n                                    onChange={(event, newValue) => {\n                                        tabs.map((element)=>element.current.style.display = \"none\")\n                                        tabs[newValue].current.style.display = \"block\"\n                                        setValueIndexed(newValue)\n                                    }}\n                                    showLabels\n                                >\n                                    <BottomNavigationAction label=\"Recents\" classes={style} icon={<RestoreIcon />} />\n                                    <BottomNavigationAction label=\"Favorites\" classes={style} icon={<FavoriteIcon />} />\n                                    <BottomNavigationAction label=\"Nearby\" classes={style} icon={<LocationOnIcon />} />\n                                </BottomNav>\n                            </div>\n                        }\n                    </filePlayingContext.Provider>\n                </SelectedPlaylistContext.Provider>\n            </playlistsContext.Provider>\n        </Content>\n    );\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}