{"ast":null,"code":"import _createForOfIteratorHelper from\"C:\\\\Users\\\\guilh\\\\Desktop\\\\ai-emotions2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _toConsumableArray from\"C:\\\\Users\\\\guilh\\\\Desktop\\\\ai-emotions2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:\\\\Users\\\\guilh\\\\Desktop\\\\ai-emotions2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _objectSpread from\"C:\\\\Users\\\\guilh\\\\Desktop\\\\ai-emotions2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _asyncToGenerator from\"C:\\\\Users\\\\guilh\\\\Desktop\\\\ai-emotions2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\guilh\\\\Desktop\\\\ai-emotions2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{getLastMusicByPlaylist,modifyPlaylistMusics}from'../services/PlaylistService';import arrayMove from'array-move';export default function useMusic(_ref,_ref2,_ref3){var _ref4=_slicedToArray(_ref,2),videoFile=_ref4[0],setVideoFile=_ref4[1];var _ref5=_slicedToArray(_ref2,2),playlists=_ref5[0],setPlaylists=_ref5[1];var _ref6=_slicedToArray(_ref3,2),selectedPlaylist=_ref6[0],setSelectedPlaylist=_ref6[1];function _selectMusic(_x,_x2){return _selectMusic2.apply(this,arguments);}function _selectMusic2(){_selectMusic2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(selectPlaylist,music){var newVideoFile;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:newVideoFile=_objectSpread({},music);newVideoFile.playing=videoFile.playing;setSelectedPlaylist(selectPlaylist);setVideoFile(newVideoFile);case 4:case\"end\":return _context.stop();}}},_callee);}));return _selectMusic2.apply(this,arguments);}function changeOrderMusic(_x3,_x4,_x5){return _changeOrderMusic.apply(this,arguments);}function _changeOrderMusic(){_changeOrderMusic=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(selectPlaylist,actualPos,newPos){var newMusics,newPlaylists,playlistInfo;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:newMusics=arrayMove(selectPlaylist.music,actualPos,newPos);newPlaylists=_toConsumableArray(playlists);_context2.next=4;return modifyPlaylistMusics(selectPlaylist._id,newMusics);case 4:playlistInfo=_context2.sent;newPlaylists[playlists.indexOf(selectPlaylist)].music=playlistInfo;setPlaylists(newPlaylists);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return _changeOrderMusic.apply(this,arguments);}function handlerSetPlaylistRandom(){return _handlerSetPlaylistRandom.apply(this,arguments);}function _handlerSetPlaylistRandom(){_handlerSetPlaylistRandom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var selectPlaylist,file;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(selectedPlaylist.music){changeOrderMusic(selectedPlaylist,0,selectedPlaylist.music.length-1);}selectPlaylist=playlists[Math.floor(Math.random()*4)];if(!(playlists.length>0)){_context3.next=7;break;}_context3.next=5;return getLastMusicByPlaylist(selectPlaylist);case 5:file=_context3.sent;_selectMusic(selectPlaylist,file);case 7:case\"end\":return _context3.stop();}}},_callee3);}));return _handlerSetPlaylistRandom.apply(this,arguments);}function handlerSetMusic(_x6){return _handlerSetMusic.apply(this,arguments);}function _handlerSetMusic(){_handlerSetMusic=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(musicFile){var selectedPlaylist,musicFind,_iterator,_step,element;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:selectedPlaylist={};musicFind={};_iterator=_createForOfIteratorHelper(playlists);_context4.prev=3;_iterator.s();case 5:if((_step=_iterator.n()).done){_context4.next=13;break;}element=_step.value;musicFind=element.music.filter(function(music){return music.value._id==musicFile._id;});if(!(musicFind.length>0)){_context4.next=11;break;}selectedPlaylist=element;return _context4.abrupt(\"break\",13);case 11:_context4.next=5;break;case 13:_context4.next=18;break;case 15:_context4.prev=15;_context4.t0=_context4[\"catch\"](3);_iterator.e(_context4.t0);case 18:_context4.prev=18;_iterator.f();return _context4.finish(18);case 21:if(playlists.length>0){_selectMusic(selectedPlaylist,musicFind[0]);}case 22:case\"end\":return _context4.stop();}}},_callee4,null,[[3,15,18,21]]);}));return _handlerSetMusic.apply(this,arguments);}return{handlerSetPlaylistRandom:handlerSetPlaylistRandom,handlerSetMusic:handlerSetMusic,changeOrderMusic:changeOrderMusic};}","map":{"version":3,"sources":["C:/Users/guilh/Desktop/ai-emotions2.0/client/src/hooks/useMusic.js"],"names":["getLastMusicByPlaylist","modifyPlaylistMusics","arrayMove","useMusic","videoFile","setVideoFile","playlists","setPlaylists","selectedPlaylist","setSelectedPlaylist","_selectMusic","selectPlaylist","music","newVideoFile","playing","changeOrderMusic","actualPos","newPos","newMusics","newPlaylists","_id","playlistInfo","indexOf","handlerSetPlaylistRandom","length","Math","floor","random","file","handlerSetMusic","musicFile","musicFind","element","filter","value"],"mappings":"0iCAAA,OAASA,sBAAT,CAAiCC,oBAAjC,KAA6D,6BAA7D,CACA,MAAOC,CAAAA,SAAP,KAAuB,YAAvB,CAEA,cAAe,SAASC,CAAAA,QAAT,kBAId,kCAHIC,SAGJ,UAHeC,YAGf,4CAFIC,SAEJ,UAFeC,YAEf,4CADIC,gBACJ,UADsBC,mBACtB,kBACkBC,CAAAA,YADlB,oJACG,iBAA4BC,cAA5B,CAA4CC,KAA5C,mIACUC,YADV,kBAC6BD,KAD7B,EAEIC,YAAY,CAACC,OAAb,CAAuBV,SAAS,CAACU,OAAjC,CACAL,mBAAmB,CAACE,cAAD,CAAnB,CACAN,YAAY,CAACQ,YAAD,CAAZ,CAJJ,sDADH,uDAQkBE,CAAAA,gBARlB,qKAQG,kBAAgCJ,cAAhC,CAAgDK,SAAhD,CAA2DC,MAA3D,8JACUC,SADV,CACsBhB,SAAS,CAACS,cAAc,CAACC,KAAhB,CAAuBI,SAAvB,CAAkCC,MAAlC,CAD/B,CAEUE,YAFV,oBAE6Bb,SAF7B,yBAG+BL,CAAAA,oBAAoB,CAACU,cAAc,CAACS,GAAhB,CAAqBF,SAArB,CAHnD,QAGUG,YAHV,gBAIIF,YAAY,CAACb,SAAS,CAACgB,OAAV,CAAkBX,cAAlB,CAAD,CAAZ,CAAgDC,KAAhD,CAAwDS,YAAxD,CAEAd,YAAY,CAACY,YAAD,CAAZ,CANJ,wDARH,2DAiBkBI,CAAAA,wBAjBlB,kLAiBG,gKACI,GAAGf,gBAAgB,CAACI,KAApB,CAA0B,CACtBG,gBAAgB,CAACP,gBAAD,CAAmB,CAAnB,CAAsBA,gBAAgB,CAACI,KAAjB,CAAuBY,MAAvB,CAA8B,CAApD,CAAhB,CACH,CAEKb,cALV,CAK2BL,SAAS,CAACmB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAgB,CAA3B,CAAD,CALpC,MAMOrB,SAAS,CAACkB,MAAV,CAAmB,CAN1B,kDAO2BxB,CAAAA,sBAAsB,CAACW,cAAD,CAPjD,QAOciB,IAPd,gBAQQlB,YAAY,CAACC,cAAD,CAAiBiB,IAAjB,CAAZ,CARR,wDAjBH,mEA8BkBC,CAAAA,eA9BlB,0JA8BG,kBAA+BC,SAA/B,6KACQtB,gBADR,CAC2B,EAD3B,CAEQuB,SAFR,CAEoB,EAFpB,sCAGuBzB,SAHvB,gGAGY0B,OAHZ,aAIQD,SAAS,CAAGC,OAAO,CAACpB,KAAR,CAAcqB,MAAd,CAAqB,SAACrB,KAAD,QAASA,CAAAA,KAAK,CAACsB,KAAN,CAAYd,GAAZ,EAAmBU,SAAS,CAACV,GAAtC,EAArB,CAAZ,CAJR,KAKWW,SAAS,CAACP,MAAV,CAAiB,CAL5B,4BAMYhB,gBAAgB,CAAGwB,OAAnB,CANZ,sQAWI,GAAG1B,SAAS,CAACkB,MAAV,CAAmB,CAAtB,CAAyB,CACrBd,YAAY,CAACF,gBAAD,CAAmBuB,SAAS,CAAC,CAAD,CAA5B,CAAZ,CACH,CAbL,6EA9BH,kDA8CG,MAAO,CACHR,wBAAwB,CAAxBA,wBADG,CAEHM,eAAe,CAAfA,eAFG,CAGHd,gBAAgB,CAAhBA,gBAHG,CAAP,CAKH","sourcesContent":["import { getLastMusicByPlaylist, modifyPlaylistMusics } from '../services/PlaylistService'\r\nimport arrayMove  from 'array-move'\r\n\r\nexport default function useMusic(\r\n    [videoFile, setVideoFile],\r\n    [playlists, setPlaylists],\r\n    [selectedPlaylist, setSelectedPlaylist]\r\n){\r\n    async function _selectMusic(selectPlaylist, music){\r\n        const newVideoFile = {...music}\r\n        newVideoFile.playing = videoFile.playing\r\n        setSelectedPlaylist(selectPlaylist)\r\n        setVideoFile(newVideoFile)\r\n    } \r\n\r\n    async function changeOrderMusic(selectPlaylist, actualPos, newPos){\r\n        const newMusics = arrayMove(selectPlaylist.music, actualPos, newPos)\r\n        const newPlaylists = [...playlists]\r\n        const playlistInfo = await modifyPlaylistMusics(selectPlaylist._id, newMusics)\r\n        newPlaylists[playlists.indexOf(selectPlaylist)].music = playlistInfo\r\n\r\n        setPlaylists(newPlaylists)\r\n    }\r\n    \r\n    async function handlerSetPlaylistRandom() {\r\n        if(selectedPlaylist.music){\r\n            changeOrderMusic(selectedPlaylist, 0, selectedPlaylist.music.length-1)\r\n        }\r\n\r\n        const selectPlaylist = playlists[Math.floor(Math.random() * 4)]\r\n        if(playlists.length > 0) {\r\n            const file = await getLastMusicByPlaylist(selectPlaylist)\r\n            _selectMusic(selectPlaylist, file)\r\n        }\r\n       \r\n    }\r\n\r\n    async function handlerSetMusic(musicFile) {\r\n        let selectedPlaylist = {}\r\n        let musicFind = {}\r\n        for(let element of playlists){\r\n            musicFind = element.music.filter((music)=>music.value._id == musicFile._id)\r\n            if(musicFind.length>0){\r\n                selectedPlaylist = element\r\n                break\r\n            }\r\n        }\r\n\r\n        if(playlists.length > 0) {\r\n            _selectMusic(selectedPlaylist, musicFind[0])\r\n        }\r\n    }\r\n\r\n    return {\r\n        handlerSetPlaylistRandom,\r\n        handlerSetMusic,\r\n        changeOrderMusic\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}