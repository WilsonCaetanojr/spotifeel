{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\guilh\\\\Desktop\\\\ai-emotions2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\guilh\\\\Desktop\\\\ai-emotions2.0\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useContext,useRef,useMemo}from'react';import{loginContext}from'../../context/loginContext';import{playlistsContext,SelectedPlaylistContext}from'../../context/playlistContext';import{filePlayingContext}from'../../context/filePlaying';import{Content,BottomNav,ControllerMusics,PlayerVideoStyle}from'./style';import{Text,Button,Dflex,Input}from'../../stylesGlobaly/globalComponents';import Playlist from'./playlist';import Player from'./player';import Emotions from'./emotions';import useDeviceDetect from'../../hooks/detectDevice';import usePlayer from'../../hooks/usePlayer';import BottomNavigationAction from'@material-ui/core/BottomNavigationAction';import QueueMusicIcon from'@material-ui/icons/QueueMusic';import VideocamIcon from'@material-ui/icons/Videocam';import EmojiEmotionsIcon from'@material-ui/icons/EmojiEmotions';import{makeStyles}from'@material-ui/core/styles';import useMusic from'../../hooks/useMusic';var useStyles=makeStyles({root:{color:\"#FFFFFF\",'&$selected':{color:\"#1db954\"}},selected:{}});var Home=function Home(){var _videoFile$value,_videoFile$value2;var style=useStyles();var _useContext=useContext(loginContext),_useContext2=_slicedToArray(_useContext,2),loginSession=_useContext2[0],setLoginSession=_useContext2[1];var _useState=useState([]),_useState2=_slicedToArray(_useState,2),playlists=_useState2[0],setPlaylists=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),videoFile=_useState4[0],setVideoFile=_useState4[1];var _usePlayer=usePlayer([videoFile,setVideoFile],[playlists,setPlaylists]),PlayPause=_usePlayer.PlayPause;var _useDeviceDetect=useDeviceDetect(),isMobile=_useDeviceDetect.isMobile;var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),valueIndexed=_useState6[0],setValueIndexed=_useState6[1];var tabs=[useRef(null),useRef(null),useRef(null)];var playerRef=useRef(null);var _useState7=useState({}),_useState8=_slicedToArray(_useState7,2),selectedPlaylist=_useState8[0],setSelectedPlaylist=_useState8[1];var _useMusic=useMusic([videoFile,setVideoFile],[playlists,setPlaylists],[selectedPlaylist,setSelectedPlaylist]),handlerSetPlaylistRandom=_useMusic.handlerSetPlaylistRandom;useEffect(function(){if(!loginSession.login&&!loginSession._id&&!loginSession.username){window.location.href=\"/\";}},[loginSession]);var handleProgress=function handleProgress(state){console.log(videoFile.seeking);if(!videoFile.seeking){var newVideoFile=_objectSpread({},videoFile);newVideoFile.played=state.played;setVideoFile(newVideoFile);}};return/*#__PURE__*/React.createElement(Content,null,/*#__PURE__*/React.createElement(playlistsContext.Provider,{value:[playlists,setPlaylists]},/*#__PURE__*/React.createElement(SelectedPlaylistContext.Provider,{value:[selectedPlaylist,setSelectedPlaylist]},/*#__PURE__*/React.createElement(filePlayingContext.Provider,{value:[videoFile,setVideoFile]},/*#__PURE__*/React.createElement(Text,{py:\"26px\",size:\"20px\"},\"Bem Vindo \",loginSession.username),!isMobile?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Playlist,{user:loginSession}),/*#__PURE__*/React.createElement(ControllerMusics,null,/*#__PURE__*/React.createElement(PlayerVideoStyle,{playing:videoFile.playing,url:(_videoFile$value=videoFile.value)===null||_videoFile$value===void 0?void 0:_videoFile$value.file,ref:playerRef,onPause:function onPause(){PlayPause(false);},onPlay:function onPlay(){PlayPause(true);},onEnded:function onEnded(){handlerSetPlaylistRandom();},onProgress:handleProgress}),/*#__PURE__*/React.createElement(Emotions,null)),/*#__PURE__*/React.createElement(Player,{player:playerRef})):/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{ref:tabs[0]},/*#__PURE__*/React.createElement(Playlist,{user:loginSession})),/*#__PURE__*/React.createElement(\"div\",{ref:tabs[1],style:{display:\"none\"}},/*#__PURE__*/React.createElement(PlayerVideoStyle,{playing:videoFile.playing,url:(_videoFile$value2=videoFile.value)===null||_videoFile$value2===void 0?void 0:_videoFile$value2.file,pip:true,onPause:function onPause(){PlayPause(false);},onPlay:function onPlay(){PlayPause(true);},onEnded:handlerSetPlaylistRandom,onSeek:function onSeek(e){return console.log('onSeek',e);},onProgress:handleProgress})),/*#__PURE__*/React.createElement(\"div\",{ref:tabs[2],style:{display:\"none\"}},/*#__PURE__*/React.createElement(Emotions,null)),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Player,{player:playerRef,bottom:\"56px\",height:\"60px\"})),/*#__PURE__*/React.createElement(BottomNav,{value:valueIndexed,onChange:function onChange(event,newValue){tabs.map(function(element){return element.current.style.display=\"none\";});tabs[newValue].current.style.display=\"block\";setValueIndexed(newValue);},showLabels:true},/*#__PURE__*/React.createElement(BottomNavigationAction,{label:\"Playlist\",classes:style,icon:/*#__PURE__*/React.createElement(QueueMusicIcon,null)}),/*#__PURE__*/React.createElement(BottomNavigationAction,{label:\"Video\",classes:style,icon:/*#__PURE__*/React.createElement(VideocamIcon,null)}),/*#__PURE__*/React.createElement(BottomNavigationAction,{label:\"Emo\\xE7\\xE3o\",classes:style,icon:/*#__PURE__*/React.createElement(EmojiEmotionsIcon,null)})))))));};export default Home;","map":{"version":3,"sources":["C:/Users/guilh/Desktop/ai-emotions2.0/client/src/components/Home/index.js"],"names":["React","useState","useEffect","useContext","useRef","useMemo","loginContext","playlistsContext","SelectedPlaylistContext","filePlayingContext","Content","BottomNav","ControllerMusics","PlayerVideoStyle","Text","Button","Dflex","Input","Playlist","Player","Emotions","useDeviceDetect","usePlayer","BottomNavigationAction","QueueMusicIcon","VideocamIcon","EmojiEmotionsIcon","makeStyles","useMusic","useStyles","root","color","selected","Home","style","loginSession","setLoginSession","playlists","setPlaylists","videoFile","setVideoFile","PlayPause","isMobile","valueIndexed","setValueIndexed","tabs","playerRef","selectedPlaylist","setSelectedPlaylist","handlerSetPlaylistRandom","login","_id","username","window","location","href","handleProgress","state","console","log","seeking","newVideoFile","played","playing","value","file","display","e","event","newValue","map","element","current"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext, useRef, useMemo } from 'react';\nimport { loginContext } from '../../context/loginContext'\nimport { playlistsContext, SelectedPlaylistContext } from '../../context/playlistContext'\nimport { filePlayingContext } from '../../context/filePlaying'\nimport { Content, BottomNav, ControllerMusics, PlayerVideoStyle } from './style'\nimport { Text, Button, Dflex, Input } from '../../stylesGlobaly/globalComponents'\nimport Playlist from './playlist'\nimport Player from './player'\nimport Emotions from './emotions'\nimport useDeviceDetect from '../../hooks/detectDevice'\nimport usePlayer from '../../hooks/usePlayer'\nimport BottomNavigationAction from '@material-ui/core/BottomNavigationAction';\nimport QueueMusicIcon from '@material-ui/icons/QueueMusic';\nimport VideocamIcon from '@material-ui/icons/Videocam';\nimport EmojiEmotionsIcon from '@material-ui/icons/EmojiEmotions';\nimport { makeStyles } from '@material-ui/core/styles';\nimport useMusic from '../../hooks/useMusic'\n\nconst useStyles = makeStyles({\n    root: {\n        color: \"#FFFFFF\",\n        '&$selected': {\n            color: \"#1db954\",\n        },\n    },\n    selected: {},\n});\n\nconst Home = ()=>{\n    const style = useStyles()\n    const [loginSession, setLoginSession] = useContext(loginContext)\n    const [playlists, setPlaylists] = useState([])\n    const [videoFile, setVideoFile] = useState({});\n    const { PlayPause } = usePlayer([videoFile, setVideoFile], [playlists, setPlaylists]);\n    const { isMobile } = useDeviceDetect();\n    const [valueIndexed, setValueIndexed] = useState(0);\n    const tabs = [useRef(null), useRef(null), useRef(null)]\n    const playerRef = useRef(null)\n    const [selectedPlaylist, setSelectedPlaylist] = useState({});\n    const { handlerSetPlaylistRandom } = useMusic(\n        [videoFile, setVideoFile],\n        [playlists, setPlaylists],\n        [selectedPlaylist, setSelectedPlaylist]\n    )\n\n    useEffect(()=>{\n        if(!loginSession.login && !loginSession._id && !loginSession.username){\n            window.location.href = \"/\"\n        }\n    }, [loginSession])\n\n    const handleProgress = (state) => {\n        console.log(videoFile.seeking)\n        if (!videoFile.seeking) {\n            const newVideoFile = {...videoFile} \n            newVideoFile.played = state.played\n            setVideoFile(newVideoFile)\n        }\n    }\n\n    return (\n        <Content>\n            <playlistsContext.Provider value={[playlists, setPlaylists]}>\n                <SelectedPlaylistContext.Provider value={[selectedPlaylist, setSelectedPlaylist]}>\n                    <filePlayingContext.Provider value={[videoFile, setVideoFile]}>\n                        <Text py=\"26px\" size=\"20px\">Bem Vindo {loginSession.username}</Text>\n                        {!isMobile ? \n                            <div>\n                                <Playlist user={loginSession}/>     \n                                <ControllerMusics>\n                                    <PlayerVideoStyle \n                                        playing={videoFile.playing} \n                                        url={videoFile.value?.file} \n                                        ref={playerRef}\n                                        onPause={()=> { \n                                            PlayPause(false)\n                                        }}\n                                        onPlay={()=> { \n                                            PlayPause(true)\n                                        }}\n                                        onEnded={()=>{\n                                            handlerSetPlaylistRandom()\n                                        }\n                                        }\n                                        onProgress={handleProgress}\n                                    />\n                                    <Emotions/>\n                                </ControllerMusics>\n                            <Player player={playerRef}/>\n                            </div>\n                            : \n                            <div>\n                                <div ref={tabs[0]}>\n                                    <Playlist user={loginSession} />  \n                                </div>     \n                                <div ref={tabs[1]} style={{display: \"none\"}}>\n                                    <PlayerVideoStyle \n                                        playing={videoFile.playing} \n                                        url={videoFile.value?.file} \n                                        pip={true} \n                                        onPause={()=> { \n                                            PlayPause(false)\n                                        }}\n                                        onPlay={()=> { \n                                            PlayPause(true)\n                                        }}\n                                        onEnded={handlerSetPlaylistRandom}\n                                        onSeek={e => console.log('onSeek', e)}\n                                        onProgress={handleProgress}\n                                    />\n                                </div>\n                                <div ref={tabs[2]} style={{display: \"none\"}}>\n                                    <Emotions />\n                                </div>\n                                <div>\n                                    <Player player={playerRef} bottom=\"56px\" height=\"60px\"/>\n                                </div>\n\n                                <BottomNav\n                                    value={valueIndexed}\n                                    onChange={(event, newValue) => {\n                                        tabs.map((element)=>element.current.style.display = \"none\")\n                                        tabs[newValue].current.style.display = \"block\"\n                                        setValueIndexed(newValue)\n                                    }}\n                                    showLabels\n                                >\n                                    <BottomNavigationAction label=\"Playlist\" classes={style} icon={<QueueMusicIcon />} />\n                                    <BottomNavigationAction label=\"Video\" classes={style} icon={<VideocamIcon />} />\n                                    <BottomNavigationAction label=\"Emoção\" classes={style} icon={<EmojiEmotionsIcon />} />\n                                </BottomNav>\n                            </div>\n                        }\n                    </filePlayingContext.Provider>\n                </SelectedPlaylistContext.Provider>\n            </playlistsContext.Provider>\n        </Content>\n    );\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}